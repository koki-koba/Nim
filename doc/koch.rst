=================================
   Nim メンテナンス スクリプト
=================================

:バージョン: |nimversion|

.. contents::

.. raw:: html
  <blockquote><p>
  "A great chef is an artist that I truly respect" -- Robert Stack.
  </p></blockquote>


初めに
======

`koch`:idx: プログラムはNimのメンテナンススクリプトです。これは移植性の低いmake/シェルスクリプトの代替品です。
kochという言葉はドイツ語で料理を意味します。kochは主にNimコンパイラをビルドするために使用されますが、ほかのタスクにも使用できます。
このドキュメントでは、サポートされているコマンドとそのオプションについて説明します。

コマンド
========

boot コマンド
-------------

`boot`:idx: コマンドはコンパイラを自動生成し、複数のオプションを受け入れます。
オプション:

-d:release
  デフォルトでは、デバッグバージョンのコンパイラが作成されます。
  このオプションを渡すと、リリースビルドが作成されます。これははるかに高速であり、
  コンパイラをデバッグする場合を除いて使用することが推奨されます。
-d:useLinenoise
  インタラクティブモードにlinenoiseライブラリを渡します(Windowsでは不要)。

コンパイルが終わったら、コンパイラが``bin``ディレクトリに作成されます。
Nimの``bin``ディレクトリにパスを通すか`install command`_を使って配置します。

csource コマンド:----------------

`csource`:idx:コマンドは、インストールのためのCソースをビルドします。 これは、 `bootコマンド` _に渡すのと同じオプションを受け入れます。

temp コマンド
-------------

tempコマンドは、Nimコンパイラをビルドしますが、最終的な名前（ `` nim_temp``）が異なるため、通常のコンパイラを上書きしません。
このコマンドを使用して、 `boot command`_のために発行するオプションと同じオプションをテストすることができます。

test コマンド
-------------

`test`:idx:コマンドはエイリアス``tests``で起動することもできます。
このコマンドは、Nimのテストスイートの主なドライバである `` tests/testament/tester.nim``をコンパイルして実行します。
``test``コマンドにオプションを渡すことができ、それらはテスターに転送されます。
利用可能なオプションについては、そのソースコードを参照してください。

web command
-----------

`web`:idx:コマンドは``doc``ディレクトリのドキュメントをrstからHTMLに変換します。
同じ操作を繰り返しますが、結果を `web/upload`に入れます。
https://nim-lang.orgでウェブサイトを更新するために使用することができます。

デフォルトでは、ドキュメントは使用可能なCPUコアの数を使用して並列に構築されます。 
ドキュメンテーション作成のサブコマンドが失敗した場合は、それらをシリアル形式で再実行して、意味のあるエラー出力を検査のために収集することができます。
`` --parallelBuild：n``スイッチまたは設定オプションを使用して、特定の数の並列ジョブを強制実行したり、開始からすべてを連続して実行することができます（``n == 1``）。
